/*! easy-toggle-state v1.11.0 | (c) 2019 Matthieu Bu√© <https://twikito.com> | MIT License | https://twikito.github.io/easy-toggle-state/ */
!function(){"use strict";function t(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function e(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var r=document.documentElement.getAttribute("data-easy-toggle-state-custom-prefix")||"toggle",n=function(){return r},i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n();return["data",e,t].filter(Boolean).join("-")},o=i("arrows"),a=i("class"),c=i("escape"),u=i("event"),s=i("group"),l=i("is-active"),g=i("modal"),f=i("outside"),d=i("outside-event"),A=i("radio-group"),h=i("target"),v=i("target-all"),b=i("target-next"),E=i("target-only"),m=i("target-parent"),T=i("target-previous"),p=i("target-self"),w=i("state"),y=i("trigger-off"),S=new Event("toggleAfter"),k=new Event("toggleBefore"),L=function(t,r){var n=t?"[".concat(t,"]"):"";return e(r?r.querySelectorAll(n):document.querySelectorAll("[".concat(a,"]").concat(n).trim()))},x=function(t,e){return t.dispatchEvent(e)},O=function(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t(r={},"aria-checked",e.isToggleActive),t(r,"aria-expanded",e.isToggleActive),t(r,"aria-hidden",!e.isToggleActive),t(r,"aria-pressed",e.isToggleActive),t(r,"aria-selected",e.isToggleActive),r);return Object.keys(n).forEach(function(t){return e.hasAttribute(t)&&e.setAttribute(t,n[t])})},D=function(t){var e=t.hasAttribute(s)?s:A;return L("".concat(e,'="').concat(t.getAttribute(e),'"')).filter(function(t){return t.isToggleActive})},I=function(t,r){if(0===r.length)return console.warn("There's no match for the selector '".concat(t,"' for this trigger")),[];var n=t.match(/#\w+/gi);return n&&n.forEach(function(t){var n=e(r).filter(function(e){return e.id===t.slice(1)});n.length>1&&console.warn("There's ".concat(n.length," matches for the selector '").concat(t,"' for this trigger"))}),e(r)},j=function(t){return document.addEventListener(t.getAttribute(d)||t.getAttribute(u)||"click",q,!1)},q=function t(e){var r=e.target,n=e.type,i=!1;L(f).filter(function(t){return t.getAttribute(d)===n||t.getAttribute(u)===n&&!t.hasAttribute(d)||"click"===n&&!t.hasAttribute(u)&&!t.hasAttribute(d)}).forEach(function(t){var e=r.closest("["+w+'="true"]');e&&e.easyToggleStateTrigger===t&&(i=!0),!i&&t!==r&&t.isToggleActive&&(t.hasAttribute(s)||t.hasAttribute(A)?M:H)(t)}),i||document.removeEventListener(n,t,!1),r.hasAttribute(f)&&r.isToggleActive&&j(r)},C=function(t){return H(t.currentTarget.targetElement)},B=function(t){if(t.hasAttribute(f))return t.hasAttribute(A)?console.warn("You can't use '".concat(f,"' on a radio grouped trigger")):t.isToggleActive?j(t):void 0},F=function(t){var r=e(document.ETSFocusTrapContainer.querySelectorAll("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]"));if(r.length&&"Tab"===t.key){var n=t.target,i=r[0],o=r[r.length-1];return-1===r.indexOf(n)?(t.preventDefault(),i.focus()):t.shiftKey&&n===i?(t.preventDefault(),o.focus()):t.shiftKey||n!==o?void 0:(t.preventDefault(),i.focus())}},Y=function(t,e,r){return function(t){if(t.hasAttribute(h)||t.hasAttribute(v)){var e=t.getAttribute(h)||t.getAttribute(v);return I(e,document.querySelectorAll(e))}if(t.hasAttribute(m)){var r=t.getAttribute(m);return I(r,t.parentElement.querySelectorAll(r))}if(t.hasAttribute(p)){var n=t.getAttribute(p);return I(n,t.querySelectorAll(n))}return t.hasAttribute(T)?I("previous",[t.previousElementSibling].filter(Boolean)):t.hasAttribute(b)?I("next",[t.nextElementSibling].filter(Boolean)):[]}(t).forEach(function(n){x(n,k),n.isToggleActive=!n.isToggleActive,O(n),r&&!n.classList.contains(e)&&n.classList.add(e),r||n.classList.toggle(e),t.hasAttribute(f)&&(n.setAttribute(w,t.isToggleActive),n.easyToggleStateTrigger=t),t.hasAttribute(g)&&(n.isToggleActive?(document.ETSFocusTrapContainer=n,document.addEventListener("keydown",F,!1)):(document.ETSFocusTrapContainer=null,document.removeEventListener("keydown",F,!1))),x(n,S),function(t,e){var r=L(y,t);if(0!==r.length)e.isToggleActive?r.forEach(function(t){t.targetElement=e,t.addEventListener("click",C,!1)}):(r.forEach(function(t){t.removeEventListener("click",C,!1)}),e.focus())}(n,t)})},H=function(t){x(t,k);var e=t.getAttribute(a)||"is-active";return t.isToggleActive=!t.isToggleActive,O(t),t.hasAttribute(E)||t.classList.toggle(e),x(t,S),Y(t,e,!1),B(t)},K=function(e){var r;x(e,k);var n=e.getAttribute(a)||"is-active";return e.isToggleActive=!0,O(e,(t(r={},"aria-checked",!0),t(r,"aria-expanded",!0),t(r,"aria-hidden",!1),t(r,"aria-pressed",!0),t(r,"aria-selected",!0),r)),e.hasAttribute(E)||e.classList.contains(n)||e.classList.add(n),x(e,S),Y(e,n,!0),B(e)},M=function(t){var e=D(t);return 0===e.length?H(t):-1===e.indexOf(t)?(e.forEach(H),H(t)):-1===e.indexOf(t)||t.hasAttribute(A)?void 0:H(t)},R=function(){L(l).filter(function(t){return!t.isETSDefInit}).forEach(function(t){return t.hasAttribute(s)||t.hasAttribute(A)?D(t).length>0?console.warn("Toggle group '".concat(t.getAttribute(s)||t.getAttribute(A),"' must not have more than one trigger with '").concat(l,"'")):(K(t),void(t.isETSDefInit=!0)):K(t)});var t=L().filter(function(t){return!t.isETSInit});return t.forEach(function(t){t.addEventListener(t.getAttribute(u)||"click",function(e){e.preventDefault(),(t.hasAttribute(s)||t.hasAttribute(A)?M:H)(t)},!1),t.isETSInit=!0}),L(c).length>0&&!document.isETSEscInit&&(document.addEventListener("keydown",function(t){"Escape"!==t.key&&"Esc"!==t.key||L(c).forEach(function(t){if(t.isToggleActive)return t.hasAttribute(A)?console.warn("You can't use '".concat(c,"' on a radio grouped trigger")):(t.hasAttribute(s)?M:H)(t)})},!1),document.isETSEscInit=!0),L(o).length>0&&!document.isETSArrInit&&(document.addEventListener("keydown",function(t){var e=document.activeElement;if(-1!==["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Home","End"].indexOf(t.key)&&e.hasAttribute(a)&&e.hasAttribute(o)){if(!e.hasAttribute(s)&&!e.hasAttribute(A))return console.warn("You can't use '".concat(o,"' on a trigger without '").concat(s,"' or '").concat(A,"'"));t.preventDefault();var r=e.hasAttribute(s)?L("".concat(s,"='").concat(e.getAttribute(s),"'")):L("".concat(A,"='").concat(e.getAttribute(A),"'")),n=e;switch(t.key){case"ArrowUp":case"ArrowLeft":n=r.indexOf(e)>0?r[r.indexOf(e)-1]:r[r.length-1];break;case"ArrowDown":case"ArrowRight":n=r.indexOf(e)<r.length-1?r[r.indexOf(e)+1]:r[0];break;case"Home":n=r[0];break;case"End":n=r[r.length-1]}return n.focus(),n.dispatchEvent(new Event(n.getAttribute(u)||"click"))}},!1),document.isETSArrInit=!0),t};document.addEventListener("DOMContentLoaded",function t(){R(),document.removeEventListener("DOMContentLoaded",t)}),window.initEasyToggleState=R}();
